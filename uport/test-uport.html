<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <meta charset="UTF-8">  
        <script src="https://unpkg.com/uport-connect/dist/uport-connect.js"></script>
    </head>
<body>
Demo login uport
<pre id="log" style="width:100%;height:200px"></pre> 
<script>
    function log(str,...arguments) {        
        var logstr=arguments.toString();
        document.getElementById("log").innerHTML +=str+" "+logstr+"\n";
    }      

    async function asyncloaded() {
        log("Start, wait a few seconds for the QR code to appear");
        const Connect = window.uportconnect;
        const uport = new Connect('Web3examples', { network: "ropsten" })
        uport.requestDisclosure()
        var res=await uport.onResponse('disclosureReq');
        var json = JSON.stringify(res.payload)
        log(`Logged in now: ${json}`);
     }       
     window.addEventListener('load', asyncloaded); 
  </script>     
</body>
</html>
